{{/* Anemone v2 - OnlyOffice Document Server administration page */}}
{{define "content"}}
<!-- Success/Error Messages -->
{{if .Success}}
<div class="v2-card" style="border-left:3px solid var(--success);margin-bottom:1rem;">
    <div style="font-size:0.875rem;color:var(--success);">{{.Success}}</div>
</div>
{{end}}
{{if .Error}}
<div class="v2-card" style="border-left:3px solid var(--error);margin-bottom:1rem;">
    <div style="font-size:0.875rem;color:var(--error);">{{.Error}}</div>
</div>
{{end}}

{{if not .DockerInstalled}}
<!-- Docker Not Installed -->
<div class="v2-card" style="border-left:3px solid var(--warning);">
    <div style="display:flex;align-items:flex-start;gap:0.75rem;">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--warning)" stroke-width="2" style="flex-shrink:0;margin-top:2px;">
            <path d="M12 9v2m0 4h.01M5.07 19h13.86c1.54 0 2.5-1.67 1.73-3L13.73 4c-.77-1.33-2.69-1.33-3.46 0L3.34 16c-.77 1.33.19 3 1.73 3z"/>
        </svg>
        <div>
            <div style="font-size:0.9375rem;font-weight:600;color:var(--text-primary);margin-bottom:0.5rem;">
                {{T .Lang "onlyoffice.docker_not_installed"}}
            </div>
            <div style="font-size:0.8125rem;color:var(--text-secondary);margin-bottom:0.75rem;">
                {{T .Lang "onlyoffice.docker_not_installed.help"}}
            </div>
            <div style="display:flex;gap:0.75rem;flex-wrap:wrap;">
                <code style="font-size:0.75rem;background:var(--bg-page);padding:0.375rem 0.75rem;border-radius:0.375rem;color:var(--text-primary);">curl -fsSL https://get.docker.com | sh</code>
            </div>
        </div>
    </div>
</div>

{{else}}
<!-- Docker is installed -->

<!-- Status Card -->
<div class="v2-card" style="padding:0;overflow:hidden;">
    <div style="padding:1rem 1.25rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;">
        <div style="display:flex;align-items:center;gap:0.75rem;">
            <span style="font-size:0.8125rem;font-weight:500;color:var(--text-secondary);">{{T .Lang "onlyoffice.status"}}:</span>
            {{if eq .ContainerStatus "running"}}
                <span class="v2-badge v2-badge-success">{{T .Lang "onlyoffice.status.running"}}</span>
            {{else if eq .ContainerStatus "exited"}}
                <span class="v2-badge" style="background:var(--bg-page);color:var(--text-muted);">{{T .Lang "onlyoffice.status.stopped"}}</span>
            {{else if .ContainerStatus}}
                <span class="v2-badge" style="background:var(--bg-page);color:var(--warning);">{{.ContainerStatus}}</span>
            {{else if not .ImagePresent}}
                <span class="v2-badge" style="background:var(--bg-page);color:var(--text-muted);">{{T .Lang "onlyoffice.status.no_image"}}</span>
            {{else}}
                <span class="v2-badge" style="background:var(--bg-page);color:var(--text-muted);">{{T .Lang "onlyoffice.status.not_created"}}</span>
            {{end}}
        </div>
        <div style="display:flex;gap:0.5rem;">
            {{if not .ImagePresent}}
            <form method="POST" action="/admin/onlyoffice/pull" style="display:inline;">
                <button type="submit" class="v2-btn v2-btn-primary v2-btn-sm" onclick="this.disabled=true;this.textContent='Pulling...';this.form.submit();">{{T .Lang "onlyoffice.pull"}}</button>
            </form>
            {{else if eq .ContainerStatus "running"}}
            <form method="POST" action="/admin/onlyoffice/restart" style="display:inline;">
                <button type="submit" class="v2-btn v2-btn-secondary v2-btn-sm">{{T .Lang "onlyoffice.restart"}}</button>
            </form>
            <form method="POST" action="/admin/onlyoffice/stop" style="display:inline;">
                <button type="submit" class="v2-btn v2-btn-secondary v2-btn-sm">{{T .Lang "onlyoffice.stop"}}</button>
            </form>
            {{else if eq .ContainerStatus "exited"}}
            <form method="POST" action="/admin/onlyoffice/start" style="display:inline;">
                <button type="submit" class="v2-btn v2-btn-primary v2-btn-sm">{{T .Lang "onlyoffice.start"}}</button>
            </form>
            <form method="POST" action="/admin/onlyoffice/remove" style="display:inline;">
                <button type="submit" class="v2-btn v2-btn-secondary v2-btn-sm" onclick="return confirm('{{T .Lang "onlyoffice.remove_confirm"}}');">{{T .Lang "onlyoffice.remove"}}</button>
            </form>
            {{else if .ImagePresent}}
            <form method="POST" action="/admin/onlyoffice/start" style="display:inline;">
                <button type="submit" class="v2-btn v2-btn-primary v2-btn-sm">{{T .Lang "onlyoffice.start"}}</button>
            </form>
            {{end}}
        </div>
    </div>

    {{if eq .ContainerStatus "running"}}
    <!-- Running info -->
    <div style="padding:0.75rem 1.25rem;border-bottom:1px solid var(--border);background:rgba(16,185,129,0.05);">
        <div style="display:flex;gap:2rem;flex-wrap:wrap;">
            <div>
                <div style="font-size:0.6875rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.05em;">URL</div>
                <div style="font-size:0.8125rem;color:var(--text-primary);font-family:monospace;">{{.OOURL}}</div>
            </div>
        </div>
    </div>
    {{end}}

    <!-- Configuration -->
    <div style="padding:1rem 1.25rem;">
        <div style="font-size:0.8125rem;font-weight:600;color:var(--text-primary);margin-bottom:0.75rem;">{{T .Lang "onlyoffice.config"}}</div>
        <div style="display:grid;gap:0.5rem;">
            <div style="display:flex;justify-content:space-between;padding:0.5rem 0;border-bottom:1px solid var(--border);">
                <span style="font-size:0.8125rem;color:var(--text-secondary);">{{T .Lang "onlyoffice.config.enabled"}}</span>
                {{if .OOEnabled}}
                <span class="v2-badge v2-badge-success">{{T .Lang "onlyoffice.yes"}}</span>
                {{else}}
                <span class="v2-badge" style="background:var(--bg-page);color:var(--text-muted);">{{T .Lang "onlyoffice.no"}}</span>
                {{end}}
            </div>
            <div style="display:flex;justify-content:space-between;padding:0.5rem 0;border-bottom:1px solid var(--border);">
                <span style="font-size:0.8125rem;color:var(--text-secondary);">{{T .Lang "onlyoffice.config.url"}}</span>
                <span style="font-size:0.8125rem;color:var(--text-primary);font-family:monospace;">{{.OOURL}}</span>
            </div>
            <div style="display:flex;justify-content:space-between;padding:0.5rem 0;">
                <span style="font-size:0.8125rem;color:var(--text-secondary);">{{T .Lang "onlyoffice.config.secret"}}</span>
                {{if .OOSecretSet}}
                <span class="v2-badge v2-badge-success">{{T .Lang "onlyoffice.config.secret_set"}}</span>
                {{else}}
                <span class="v2-badge" style="background:var(--bg-page);color:var(--text-muted);">{{T .Lang "onlyoffice.config.secret_auto"}}</span>
                {{end}}
            </div>
        </div>
    </div>
</div>

{{if and (not (eq .ContainerStatus "running")) .ImagePresent}}
<!-- Quick start hint -->
<div class="v2-card" style="border-left:3px solid var(--info);margin-top:1rem;">
    <div style="display:flex;align-items:flex-start;gap:0.75rem;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--info)" stroke-width="2" style="flex-shrink:0;margin-top:2px;">
            <circle cx="12" cy="12" r="10"/><path d="M12 16v-4m0-4h.01"/>
        </svg>
        <div style="font-size:0.8125rem;color:var(--text-secondary);">
            {{T .Lang "onlyoffice.hint_click_start"}}
        </div>
    </div>
</div>
{{end}}

{{end}}
{{end}}
