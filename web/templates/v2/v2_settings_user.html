{{define "content"}}
<!-- Success Message -->
{{if .Success}}
<div class="v2-card" style="padding:0.75rem 1rem;margin-bottom:1rem;border-left:3px solid var(--success);background:rgba(16,185,129,0.08);">
    <span style="font-size:0.8125rem;color:var(--success);">{{.Success}}</span>
</div>
{{end}}

<!-- Error Message -->
{{if .Error}}
<div class="v2-card" style="padding:0.75rem 1rem;margin-bottom:1rem;border-left:3px solid var(--error);background:rgba(239,68,68,0.08);">
    <span style="font-size:0.8125rem;color:var(--error);">{{.Error}}</span>
</div>
{{end}}

<!-- Language Section -->
<div class="v2-card" style="padding:1.25rem;margin-bottom:1rem;">
    <h3 style="font-size:0.9375rem;font-weight:600;color:var(--text-primary);margin-bottom:0.25rem;">
        {{T .Lang "settings.language.title"}}
    </h3>
    <p style="font-size:0.8125rem;color:var(--text-muted);margin-bottom:1rem;">
        {{T .Lang "settings.language.description"}}
    </p>
    <form method="POST" action="/settings/language">
        <div style="margin-bottom:0.75rem;">
            <label for="language" style="display:block;font-size:0.8125rem;font-weight:500;color:var(--text-secondary);margin-bottom:0.375rem;">
                {{T .Lang "settings.language.title"}}
            </label>
            <select id="language" name="language" style="width:100%;max-width:300px;padding:0.5rem 0.75rem;border-radius:0.375rem;border:1px solid var(--border);background:var(--bg-card);color:var(--text-primary);font-size:0.8125rem;">
                <option value="fr" {{if eq .Lang "fr"}}selected{{end}}>{{T .Lang "settings.language.french"}}</option>
                <option value="en" {{if eq .Lang "en"}}selected{{end}}>{{T .Lang "settings.language.english"}}</option>
            </select>
        </div>
        <button type="submit" class="v2-btn v2-btn-primary">{{T .Lang "settings.language.button"}}</button>
    </form>
</div>

<!-- Password Section -->
<div class="v2-card" style="padding:1.25rem;margin-bottom:1rem;">
    <h3 style="font-size:0.9375rem;font-weight:600;color:var(--text-primary);margin-bottom:0.25rem;">
        {{T .Lang "settings.password.title"}}
    </h3>
    <p style="font-size:0.8125rem;color:var(--text-muted);margin-bottom:1rem;">
        {{T .Lang "settings.password.description"}}
    </p>
    <form method="POST" action="/settings/password" style="max-width:400px;">
        <div style="margin-bottom:0.75rem;">
            <label for="current_password" style="display:block;font-size:0.8125rem;font-weight:500;color:var(--text-secondary);margin-bottom:0.375rem;">
                {{T .Lang "settings.password.current"}}
            </label>
            <input type="password" id="current_password" name="current_password" required
                   style="width:100%;padding:0.5rem 0.75rem;border-radius:0.375rem;border:1px solid var(--border);background:var(--bg-card);color:var(--text-primary);font-size:0.8125rem;">
        </div>
        <div style="margin-bottom:0.75rem;">
            <label for="new_password" style="display:block;font-size:0.8125rem;font-weight:500;color:var(--text-secondary);margin-bottom:0.375rem;">
                {{T .Lang "settings.password.new"}}
            </label>
            <input type="password" id="new_password" name="new_password" required minlength="8"
                   style="width:100%;padding:0.5rem 0.75rem;border-radius:0.375rem;border:1px solid var(--border);background:var(--bg-card);color:var(--text-primary);font-size:0.8125rem;">
            <p style="font-size:0.7rem;color:var(--text-muted);margin-top:0.25rem;">{{T .Lang "settings.password.minlength"}}</p>
        </div>
        <div style="margin-bottom:0.75rem;">
            <label for="confirm_password" style="display:block;font-size:0.8125rem;font-weight:500;color:var(--text-secondary);margin-bottom:0.375rem;">
                {{T .Lang "settings.password.confirm"}}
            </label>
            <input type="password" id="confirm_password" name="confirm_password" required minlength="8"
                   style="width:100%;padding:0.5rem 0.75rem;border-radius:0.375rem;border:1px solid var(--border);background:var(--bg-card);color:var(--text-primary);font-size:0.8125rem;">
        </div>
        <button type="submit" class="v2-btn v2-btn-primary">{{T .Lang "settings.password.button"}}</button>
    </form>
</div>

<!-- Account Info Section -->
<div class="v2-card" style="padding:1.25rem;">
    <h3 style="font-size:0.9375rem;font-weight:600;color:var(--text-primary);margin-bottom:1rem;">
        {{T .Lang "settings.info.title"}}
    </h3>
    <div style="display:grid;gap:0.75rem;">
        <div>
            <div style="font-size:0.75rem;color:var(--text-muted);">{{T .Lang "settings.info.username"}}</div>
            <div style="font-size:0.875rem;font-weight:500;color:var(--text-primary);">{{.Session.Username}}</div>
        </div>
        {{if .User.Email}}
        <div>
            <div style="font-size:0.75rem;color:var(--text-muted);">{{T .Lang "settings.info.email"}}</div>
            <div style="font-size:0.875rem;font-weight:500;color:var(--text-primary);">{{.User.Email}}</div>
        </div>
        {{end}}
        <div>
            <div style="font-size:0.75rem;color:var(--text-muted);">{{T .Lang "settings.info.created"}}</div>
            <div style="font-size:0.875rem;font-weight:500;color:var(--text-primary);">{{.User.CreatedAt.Format "02/01/2006"}}</div>
        </div>
    </div>
</div>
{{end}}
