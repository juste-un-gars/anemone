{{define "content"}}
<!-- Backup selection -->
<div class="v2-card" style="padding:1.25rem;margin-bottom:1rem;">
    <label for="backup-select" style="display:block;font-size:0.8125rem;font-weight:500;color:var(--text-secondary);margin-bottom:0.5rem;">
        {{T .Lang "restore.select_backup"}}
    </label>
    <select id="backup-select" style="width:100%;max-width:500px;padding:0.5rem 0.75rem;border-radius:0.375rem;border:1px solid var(--border);background:var(--bg-card);color:var(--text-primary);font-size:0.8125rem;">
        <option value="">{{T .Lang "restore.choose_backup"}}</option>
    </select>
    <div id="backup-info" class="hidden" style="margin-top:1rem;">
        <div style="display:grid;grid-template-columns:repeat(3, 1fr);gap:1rem;">
            <div>
                <span style="font-size:0.75rem;color:var(--text-muted);">{{T .Lang "restore.backup_info.files"}}</span>
                <span id="backup-file-count" style="margin-left:0.5rem;font-weight:600;color:var(--text-primary);font-size:0.8125rem;">-</span>
            </div>
            <div>
                <span style="font-size:0.75rem;color:var(--text-muted);">{{T .Lang "restore.backup_info.size"}}</span>
                <span id="backup-size" style="margin-left:0.5rem;font-weight:600;color:var(--text-primary);font-size:0.8125rem;">-</span>
            </div>
            <div>
                <span style="font-size:0.75rem;color:var(--text-muted);">{{T .Lang "restore.backup_info.modified"}}</span>
                <span id="backup-date" style="margin-left:0.5rem;font-weight:600;color:var(--text-primary);font-size:0.8125rem;">-</span>
            </div>
        </div>
    </div>
</div>

<!-- Loading state -->
<div id="loading" class="hidden v2-card" style="padding:3rem;text-align:center;">
    <div style="display:inline-block;width:32px;height:32px;border:3px solid var(--border);border-top-color:var(--info);border-radius:50%;animation:spin 0.8s linear infinite;"></div>
    <p style="margin-top:1rem;color:var(--text-muted);font-size:0.8125rem;">{{T .Lang "restore.loading"}}</p>
</div>
<style>@keyframes spin { to { transform: rotate(360deg); } }</style>

<!-- File browser -->
<div id="file-browser" class="hidden v2-card" style="padding:0;overflow:hidden;">
    <!-- Breadcrumb -->
    <div style="padding:0.75rem 1rem;border-bottom:1px solid var(--border);background:var(--bg-page);">
        <nav>
            <ol id="breadcrumb" style="display:flex;align-items:center;gap:0.25rem;list-style:none;margin:0;padding:0;">
                <li>
                    <a href="#" data-path="/" class="breadcrumb-link" style="color:var(--text-muted);display:flex;align-items:center;">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                        </svg>
                    </a>
                </li>
            </ol>
        </nav>
    </div>

    <!-- Selection toolbar -->
    <div id="selection-toolbar" class="hidden" style="padding:0.75rem 1rem;border-bottom:1px solid var(--border);background:rgba(99,102,241,0.06);display:flex;align-items:center;justify-content:space-between;">
        <div style="display:flex;align-items:center;gap:0.75rem;">
            <span id="selection-count" style="font-size:0.8125rem;font-weight:600;color:var(--text-primary);">0 {{T .Lang "restore.selection.count"}}</span>
            <button data-action="selectAll" style="font-size:0.75rem;color:var(--info);background:none;border:none;cursor:pointer;">
                {{T .Lang "restore.selection.select_all"}}
            </button>
            <button data-action="clearSelection" style="font-size:0.75rem;color:var(--info);background:none;border:none;cursor:pointer;">
                {{T .Lang "restore.selection.clear"}}
            </button>
        </div>
        <button data-action="downloadSelection" class="v2-btn v2-btn-primary" style="font-size:0.75rem;padding:0.375rem 0.75rem;">
            <svg style="width:14px;height:14px;margin-right:0.25rem;vertical-align:middle;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
            {{T .Lang "restore.selection.download"}}
        </button>
    </div>

    <!-- File list -->
    <div style="overflow-x:auto;">
        <table class="v2-table">
            <thead>
                <tr>
                    <th style="width:40px;">
                        <input type="checkbox" id="select-all-checkbox" style="accent-color:var(--info);">
                    </th>
                    <th>{{T .Lang "restore.file_browser.name"}}</th>
                    <th>{{T .Lang "restore.file_browser.size"}}</th>
                    <th>{{T .Lang "restore.file_browser.modified"}}</th>
                    <th style="text-align:right;">{{T .Lang "restore.file_browser.actions"}}</th>
                </tr>
            </thead>
            <tbody id="file-list">
            </tbody>
        </table>
    </div>
</div>

<!-- No backups message -->
<div id="no-backups" class="hidden v2-card" style="padding:3rem;text-align:center;">
    <svg style="margin:0 auto 1rem;width:48px;height:48px;color:var(--text-muted);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
    </svg>
    <h3 style="font-size:0.9375rem;font-weight:600;color:var(--text-primary);margin-bottom:0.25rem;">{{T .Lang "restore.empty.title"}}</h3>
    <p style="font-size:0.8125rem;color:var(--text-muted);">{{T .Lang "restore.empty.message"}}</p>
</div>

{{end}}

{{define "pageScripts"}}
<script type="application/json" id="page-data">
{"lang": "{{.Lang}}", "translations": {"errorLoadingBackups": "{{T .Lang "restore.error.loading"}}", "errorLoadingFiles": "{{T .Lang "restore.error.files"}}", "downloadAction": "{{T .Lang "restore.action.download"}}", "errorDownload": "{{T .Lang "restore.error.download"}}", "selectionCount": "{{T .Lang "restore.selection.count"}}", "errorSelection": "{{T .Lang "restore.error.selection"}}", "minutesAgo": "{{T .Lang "restore.time.minutes_ago"}}", "hoursAgo": "{{T .Lang "restore.time.hours_ago"}}", "daysAgo": "{{T .Lang "restore.time.days_ago"}}"}}
</script>
<script src="/static/js/restore.js"></script>
{{end}}
